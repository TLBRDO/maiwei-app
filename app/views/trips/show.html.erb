<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-12">
      <div class="align-items-right">
        <%= link_to "Sauvegarder mon séjour", "#" %>
        <%= link_to "Modifier mon séjour", edit_trip_path(@trip) %>
      </div>
      <h1 >Votre séjour à <%= @trip.trip_name %></h1>
      <h4>Du <%= @starting_date %> au <%= @ending_date %></h4>
      <h4>Budget : <%= @trip.budget %>€</h4>
      <h6>Vous pouvez désormais déplacer chaque étape de votre programme en fonction de votre préférence.</h6>
      <div class="d-flex align-item-center" data-controller="sortable">
        <div class="first_column">
          <% @dates.each do |date| %>
            <section class="day-trip-list">
              <h3><%= date[0].strftime('%A %-d %B') %></h3>
              <div data-sortable-target="list" data-trip-id="<%= @trip.id %>" data-date="<%= date[0] %>">
                <% date[1].each do |trip_activity| %>
                  <p><strong>De <%= trip_activity.start_at.strftime('%Hh%M') %> à <%= trip_activity.end_at.strftime('%Hh%M') %></strong></p>
                  <%= render "trips/trip_activity_card", trip_activity: trip_activity %>
                <% end %>
              </div>
              <% if date[1].empty? %>
                <div class="callout"></div>
              <% end %>
            </section>
          <% end %>

        </div>
        <div class="second_column mt-4">
          <section class="trip-activities-list" data-sortable-target="list">
            <% @trip.trip_activities.where("start_at IS NULL").each do |trip_activity| %>
              <%= render "trips/trip_activity_card", trip_activity: trip_activity %>
            <% end %>
          </section>
          <div class="sticky" style="width: 500px; height: 500px;"
                data-controller=""
                data-map-markers-value="<%= @markers.to_json %>"
                data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
